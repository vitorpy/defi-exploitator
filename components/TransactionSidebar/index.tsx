import * as React from "react";
import { Button } from "semantic-ui-react";
import { useWallet } from 'use-wallet';
import { IChart } from "@mrblenny/react-flow-chart";

import { Message } from "../Common";

export interface ITransactionSidebarProps {
  chart: IChart
}

export function TransactionSidebar({ chart } : ITransactionSidebarProps) {
  const wallet = useWallet()

  const generateTransaction = () => {
    const tx = {
      to: wallet.account,
      amount: 0,
    };

    const sendPromise = wallet.sendTransaction(tx);
    sendPromise.then((tx) => {
      console.log(tx);
    });
  }

  return (
    <>
      <Message>
        Details about your transaction will appear here.
      </Message>

      {!wallet.connected ? (
        <Button onClick={() => wallet.activate()}>Connect with MetaMask</Button>
      ) : (
        <Button onClick={generateTransaction}>Send Transaction</Button>
      )}
    </>
  )
}
